<!DOCTYPE html>
<html>
<head>
  <title>Selected Items</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }
    
    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
    }
    
    /* Style the icons */
    .item-icon {
      display: block;
      width: 50px;
      height: auto;
      margin: 0 auto; /* Center the icons horizontally */
      transition: width 0.3s ease; /* Add transition effect */
    }
  </style>
</head>
<body>
  <h1>Selected Items</h1>
  
  <div id="table-container"></div>
  
  <script>
    // Function to fetch the CSV file and generate the table for selected items
    function generateSelectedItemsTable() {
      // Retrieve the selected items from the query parameter
      var queryString = window.location.search;
      var urlParams = new URLSearchParams(queryString);
      var selectedItems = urlParams.get('selectedItems');
      var selectedItemsArray = selectedItems.split(',');
      
      // Fetch the CSV file
      var csvFile = 'items.csv';  // Replace with your CSV file path
      fetch(csvFile)
        .then(function(response) {
          return response.text();
        })
        .then(function(csvData) {
          // Parse CSV data
          var rows = csvData.split('\n');
          var tableHTML = '<table>';
          
          // Generate the table rows for selected items
          for (var i = 0; i < rows.length; i++) {
            var cells = rows[i].split(',');
            var itemId = cells[3];  // Assuming item ID is in the fourth column
            
            // Check if the current item is selected
            if (selectedItemsArray.includes(itemId)) {
              tableHTML += '<tr>';
              
              // Add the checkbox column
              tableHTML += '<td><input type="checkbox" checked disabled></td>';
              
              // Add the icon column
              var iconPath = 'icons/' + cells[1] + '.jpg';  // Assuming item code is in the second column
              tableHTML += '<td><img class="item-icon" src="' + iconPath + '"></td>';
              
              // Add the remaining columns
              for (var j = 0; j < cells.length; j++) {
                tableHTML += '<td>' + cells[j] + '</td>';
              }
              
              tableHTML += '</tr>';
            }
          }
          
          tableHTML += '</table>';
          
          // Append the table to the "table-container" div
          document.getElementById('table-container').innerHTML = tableHTML;
        });
    }
    
    // Generate the table for selected items on page load
    window.addEventListener('load', generateSelectedItemsTable);
  </script>
</body>
</html>
